<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Green Wave</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    
    <link href="https://fonts.googleapis.com/css?family=Overpass:300,400,500|Dosis:400,700" rel="stylesheet">
    <link rel="stylesheet" href="css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link rel="stylesheet" href="css/magnific-popup.css">
    <link rel="stylesheet" href="css/aos.css">
    <link rel="stylesheet" href="css/ionicons.min.css">
    <link rel="stylesheet" href="css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="css/jquery.timepicker.css">
    <link rel="stylesheet" href="css/flaticon.css">
    <link rel="stylesheet" href="css/icomoon.css">
    <link rel="stylesheet" href="css/fancybox.min.css">

    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/style.css">

  </head>
  <body>
    
  <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
    <div class="container">
      <a class="navbar-brand" href="index.html">Green Wave</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="oi oi-menu"></span> Menu
      </button>

      <div class="collapse navbar-collapse" id="ftco-nav">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item"><a href="index.html" class="nav-link">Home</a></li>
          <li class="nav-item"><a href="how-it-works.html" class="nav-link">How It Works</a></li>
          <li class="nav-item"><a href="community_memberss.html" class="nav-link">Community Members</a></li>
          <li class="nav-item"><a href="gallery.html" class="nav-link">Gallery</a></li>
          <li class="nav-item active"><a href="blog.html" class="nav-link">Blog</a></li>
          <li class="nav-item"><a href="about.html" class="nav-link">About</a></li>
          <li class="nav-item"><a href="contact.html" class="nav-link">Contact</a></li>
          <li class="nav-item"><a href="admin-login.html" class="nav-link">Admin</a></li>
        </ul>
      </div>
    </div>
  </nav>
  <!-- END nav -->
  
  <div class="block-31" style="position: relative;">
    <div class="owl-carousel loop-block-31 ">
      <div class="block-30 block-30-sm item" style="background-image: url('images/bg_1.jpg');" data-stellar-background-ratio="0.5">
        <div class="container">
          <div class="row align-items-center justify-content-center text-center">
            <div class="col-md-7">
              <h2 class="heading mb-5">Our Blog</h2>
            </div>
          </div>
        </div>
      </div>
      
    </div>
  </div>
  
  
  <div class="site-section bg-light">
    <div class="container">
      <div class="row">
        <!-- Blog posts will be injected here by Contentful SDK -->
      </div>
    </div>
  </div> <!-- .section -->


  <footer class="footer">
    <div class="container">
      <div class="row mb-5">
        <div class="col-md-6 col-lg-4">
          <h3 class="heading-section">About Us</h3>
          <p class="lead">Separated by distance but connected by vision, the youth of GreenWave gather right at the frontlines of the environmental crisis. </p>
          <p class="mb-5">They do not just observe the changing tides; they are the current. In this large ocean of challenges, they build the bridges of education and community care, ensuring that no call for help goes unanswered and no leaf is left unturned.</p>
        </div>
        <div class="col-md-6 col-lg-4">
          <h3 class="heading-section">Recent Blog</h3>
          <div id="footer-recent-blogs">
            <!-- Dynamic footer blogs will be loaded here -->
          </div>
        </div>
        <div class="col-md-6 col-lg-4">
          <div class="block-23">
            <h3 class="heading-section">Get Connected</h3>
            <ul>
              <li><a href="#"><span class="icon icon-phone"></span><span class="text">+94 77 084 7338</span></a></li>
              <li><a href="#"><span class="icon icon-envelope"></span><span class="text">greenwave074@gmail.com</span></a></li>
              <li><a href="https://www.facebook.com/profile.php?id=61565423006715&mibextid=ZbWKwL"><span class="icon icon-facebook"></span><span class="text">Facebook</span></a></li>
              <li><a href="https://wa.me/+94770847338"><span class="icon icon-whatsapp"></span><span class="text">Whatsapp</span></a></li>
            </ul>
          </div>
        </div>


      </div>
      <div class="row pt-5">
        <div class="col-md-12 text-center">

          <p>
            Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved by Cortex.A
          </p>- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->


        </div>
      </div>
    </div>
  </footer>

  <!-- Blog Modal 1 -->
  <div class="modal fade" id="blogModal1" tabindex="-1" role="dialog" aria-labelledby="blogModal1Label" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="blogModal1Label">Biotechnological Tools for Plant Conservation</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <img src="images/biotech_poster.jpg" class="img-fluid mb-4 w-100" alt="Biotech Poster">
          
          <h5>About This Event</h5>
          <p>GreenWave Organization hosted its inaugural online educational lecture on "Biotechnological Tools for Plant Conservation" in November 2025. This landmark event marked the beginning of our commitment to empowering students and the public with knowledge that supports environmental protection.</p>
          
          <p>The lecture brought together environmental enthusiasts, students, and professionals to explore innovative biotechnological approaches to plant conservation. Through expert insights and interactive discussion, participants gained valuable knowledge about cutting-edge techniques being used to preserve and restore plant biodiversity.</p>
          
          <h5>Event Significance</h5>
          <p>This event was pivotal in establishing GreenWave's presence as a credible youth-led environmental organization. By bridging academic knowledge with practical conservation efforts, we demonstrated our commitment to science-based environmental protection and community education.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- loader -->
  <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>


  <script src="js/jquery.min.js"></script>
  <script src="js/jquery-migrate-3.0.1.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/jquery.easing.1.3.js"></script>
  <script src="js/jquery.waypoints.min.js"></script>
  <script src="js/jquery.stellar.min.js"></script>
  <script src="js/owl.carousel.min.js"></script>
  <script src="js/jquery.magnific-popup.min.js"></script>
  <script src="js/bootstrap-datepicker.js"></script>

  <script src="js/jquery.fancybox.min.js"></script>
  
  <script src="js/aos.js"></script>
  <script src="js/jquery.animateNumber.min.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
  <script src="js/google-map.js"></script>
  <!-- Contentful SDK -->
  <script src="https://cdn.jsdelivr.net/npm/contentful@latest/dist/contentful.browser.min.js"></script>
  <script src="js/contentful-config.js"></script>
  <script src="js/main.js"></script>
    
  <script>
    // Load Blogs from Contentful
    document.addEventListener('DOMContentLoaded', function() {
        // defined in contentful-config.js: client
        const blogContainer = document.querySelector('.site-section .container .row');
        const modalContainer = document.body;

        client.getEntries({
            content_type: 'blogPost' 
        })
        .then((response) => {
            if (response.items.length === 0) {
                console.warn("No blog posts found.");
                // alert("Connected to Contentful, but found 0 posts. Check your Content Type ID.");
            }
            response.items.forEach((item) => {
                const fields = item.fields;
                console.log("Full fields object:", fields); // Debugging
                // Field Mapping based on user input: heading, description, thumbnail
                // Assuming 'date' might be sys.createdAt or a field if they added one. let's use createdAt for now.
                console.log("Processing item:", item.sys.id);
                
                // Helper to render Rich Text
                function renderRichText(node) {
                    if (node.nodeType === 'text') {
                        let text = node.value;
                        if (node.marks) {
                            node.marks.forEach(mark => {
                                if (mark.type === 'bold') text = `<b>${text}</b>`;
                                if (mark.type === 'underline') text = `<u>${text}</u>`;
                                if (mark.type === 'italic') text = `<i>${text}</i>`;
                            });
                        }
                        return text;
                    }
                    if (node.content && Array.isArray(node.content)) {
                        const inner = node.content.map(renderRichText).join('');
                        switch (node.nodeType) {
                            case 'document': return inner;
                            case 'paragraph': return `<p>${inner}</p>`;
                            case 'heading-1': return `<h1>${inner}</h1>`;
                            case 'heading-2': return `<h2>${inner}</h2>`;
                            case 'heading-3': return `<h3>${inner}</h3>`;
                            case 'heading-4': return `<h4>${inner}</h4>`;
                            case 'heading-5': return `<h5>${inner}</h5>`;
                            case 'heading-6': return `<h6>${inner}</h6>`;
                            default: return inner; 
                        }
                    }
                    return '';
                }

                // Helper to get plain text for preview
                function getPlainText(node) {
                     if (node.nodeType === 'text') return node.value;
                     if (node.content) return node.content.map(getPlainText).join(' ');
                     return '';
                }

                const title = fields.heading || 'Untitled';
                
                let rawDesc = fields.description;
                let descHtml = '';
                let descPreview = '';

                if (rawDesc && rawDesc.nodeType === 'document') {
                    descHtml = renderRichText(rawDesc);
                    descPreview = getPlainText(rawDesc);
                } else if (typeof rawDesc === 'string') {
                    descHtml = `<p>${rawDesc}</p>`;
                    descPreview = rawDesc;
                }

                let imgUrl = 'images/image_1.jpg';
                if (fields.thumbnail && fields.thumbnail.fields && fields.thumbnail.fields.file) {
                    imgUrl = fields.thumbnail.fields.file.url;
                }
                
                const date = new Date(item.sys.createdAt).toLocaleDateString();
                const id = item.sys.id;
                const content = descHtml; // Use parsed HTML for modal 

                // 1. Create Blog Card
                const cardHtml = `
                    <div class="col-md-6 col-lg-4 mb-4">
                      <div class="card h-100 shadow-sm">
                        <img src="${imgUrl}" class="card-img-top" alt="${title}">
                        <div class="card-body d-flex flex-column">
                          <h5 class="card-title">
                            <a href="#" data-toggle="modal" data-target="#modal_${id}" style="color: #28a745; text-decoration: none;">${title}</a>
                          </h5>
                          <p class="text-muted small mb-3">
                            <span class="icon-calendar"></span> ${date}
                          </p>
                          <p class="card-text">${descPreview.substring(0, 100)}...</p>
                          <button type="button" class="btn btn-success mt-auto" data-toggle="modal" data-target="#modal_${id}">Read More</button>
                        </div>
                      </div>
                    </div>
                `;
                blogContainer.insertAdjacentHTML('afterbegin', cardHtml);

                // 2. Create Modal
                const modalHtml = `
                  <div class="modal fade" id="modal_${id}" tabindex="-1" role="dialog" aria-hidden="true">
                    <div class="modal-dialog modal-lg" role="document">
                      <div class="modal-content">
                        <div class="modal-header">
                          <h5 class="modal-title">${title}</h5>
                          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                          </button>
                        </div>
                        <div class="modal-body">
                          <img src="${imgUrl}" class="img-fluid mb-4 w-100" alt="${title}">
                          <p class="text-muted"><span class="icon-calendar"></span> ${date}</p>
                          <div>${content}</div>
                        </div>
                        <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        </div>
                      </div>
                    </div>
                  </div>
                `;
                modalContainer.insertAdjacentHTML('beforeend', modalHtml);
            });
        })
        .catch(err => {
            console.error(err);
            alert("Contentful Error: " + err.message + "\n\nDouble check your Space ID, Token, and Content Type ID.");
        });
    });
  </script>
</body>
</html>